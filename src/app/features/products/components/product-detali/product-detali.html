<!-- product-detail.component.html -->
<div class="container py-5 mt-4">
  @if (productState$ | async; as state) {
  @if (state.loading) {
  <div class="text-center py-5">
    <div class="spinner-border text-primary"></div>
    <p class="mt-3">جارٍ تحميل تفاصيل المنتج...</p>
  </div>
  } @else if (state.error) {
  <div class="alert alert-danger text-center">
    ❌ تعذر تحميل المنتج، حاول مرة أخرى لاحقًا
  </div>
  } @else if (state.product) {
  <div class="row g-5 align-items-center">
    <!-- الصورة -->
    <div class="col-md-6 text-center">
      <img ngOptimizedImage [src]="state.product.image" [alt]="state.product.title" class="img-fluid rounded shadow-sm"
        width="420" height="420" />
    </div>

    <!-- التفاصيل -->
    <div class="col-md-6">
      <h2 class="fw-bold mb-3">{{ state.product.title }}</h2>
      <p class="text-muted mb-4">{{ state.product.description }}</p>

      <!-- السعر -->
      <div class="d-flex align-items-center mb-3">
        <h4 class="text-success fw-bold me-3">
          ${{ state.product.price | number:'1.2-2' }}
        </h4>
        <span class="badge bg-warning text-dark">
          ⭐ {{ state.product.rating.rate }}
        </span>
      </div>

      <!-- زر الإضافة -->
      <button class="btn btn-success btn-lg w-100 mb-3" (click)="addToCart(state.product.id)"
        aria-label="إضافة {{ state.product.title }} إلى السلة">
        <i class="bi bi-cart-plus me-2"></i>
        إضافة إلى السلة
      </button>

      <!-- زر العودة -->
      <a routerLink="/products" class="btn btn-outline-secondary w-10 d-block mx-auto text-center">
        العودة إلى المنتجات
      </a>
    </div>
  </div>
  }
  }
</div>
